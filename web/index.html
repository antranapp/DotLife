<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="theme-color" content="#0a0a0a">
  <meta name="description" content="DotLife - Capture an experience in seconds. See time as soft dots. Tap to relive.">
  <title>DotLife</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html, body {
      height: 100%;
      background-color: #0a0a0a;
      color: #fff;
      font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'Helvetica Neue', sans-serif;
    }

    body {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      padding: 2rem;
    }

    .container {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 3rem;
      max-width: 100%;
    }

    .dot-grid {
      display: grid;
      grid-template-columns: repeat(19, 16px);
      gap: 6px;
      justify-content: center;
    }

    .dot {
      width: 16px;
      height: 16px;
      border-radius: 50%;
      background-color: #1a1a1a;
      transition: background-color 0.3s ease, transform 0.3s ease;
    }

    /* Past days - softly filled */
    .dot.past {
      background-color: #444;
    }

    /* Future days - very dim */
    .dot.future {
      background-color: #1a1a1a;
    }

    /* Today - animated pulse */
    .dot.today {
      background-color: #aaa;
      animation: pulse 2s ease-in-out infinite;
      box-shadow: 0 0 8px 2px rgba(255, 255, 255, 0.3);
    }

    /* Letter dots - subtle, blended with background */
    /* Always the same color regardless of past/today/future */
    .dot.letter {
      background-color: #252525 !important;
      animation: none !important;
    }

    @keyframes pulse {
      0%, 100% {
        transform: scale(1);
        opacity: 1;
        box-shadow: 0 0 8px 2px rgba(255, 255, 255, 0.3);
      }
      50% {
        transform: scale(1.3);
        opacity: 0.85;
        box-shadow: 0 0 16px 6px rgba(255, 255, 255, 0.5);
      }
    }


    .app-store-badge {
      display: inline-block;
      transition: opacity 0.2s ease, transform 0.2s ease;
    }

    .app-store-badge:hover {
      opacity: 0.8;
      transform: scale(1.02);
    }

    .app-store-badge img {
      height: 44px;
      width: auto;
    }

    /* Responsive adjustments */
    @media (max-width: 480px) {
      body {
        padding: 1rem;
      }

      .dot-grid {
        grid-template-columns: repeat(19, 12px);
        gap: 4px;
      }

      .dot {
        width: 12px;
        height: 12px;
      }

      .container {
        gap: 2rem;
      }

      .app-store-badge img {
        height: 40px;
      }
    }

    @media (min-width: 768px) {
      .dot-grid {
        grid-template-columns: repeat(19, 20px);
        gap: 8px;
      }

      .dot {
        width: 20px;
        height: 20px;
      }
    }
  </style>
</head>
<body>
  <main class="container">
    <div class="dot-grid" id="dotGrid">
      <!-- Dots will be generated by JavaScript -->
    </div>
    <a href="https://apps.apple.com/app/dotlife" class="app-store-badge" aria-label="Download on the App Store">
      <img src="app-store-badge.svg" alt="Download on the App Store" height="44">
    </a>
  </main>

  <script>
    (function() {
      // Calculate if current year is a leap year
      const now = new Date();
      const year = now.getFullYear();
      const isLeapYear = (year % 4 === 0 && year % 100 !== 0) || (year % 400 === 0);
      const totalDays = isLeapYear ? 366 : 365;

      // Calculate day of year (1-indexed)
      const start = new Date(year, 0, 0);
      const diff = now - start;
      const oneDay = 1000 * 60 * 60 * 24;
      const dayOfYear = Math.floor(diff / oneDay);

      // DOTLIFE letter map - positions in a 19-column grid
      // Each letter is 5 dots wide, 7 dots tall, with 1 dot spacing
      // Letters start at row 6 (index 95 in 0-indexed, to center vertically)
      // Grid positions: row * 19 + column

      // Starting column for "DOTLIFE" to be roughly centered
      // Total width: 7 letters * 5 + 6 spaces = 41, but we have 19 cols
      // So we'll do 2 rows: "DOT" on row 6-12, "LIFE" on row 8-14
      // Actually with 19 cols: let's do single row condensed letters (3 wide)
      // Or better: position in middle rows with compact 3-wide letters

      // Letter patterns (3 wide x 5 tall) - more compact for 19-col grid
      // Each letter defined as array of [row_offset, col_offset] from letter start
      const letterPatterns = {
        'D': [[0,0],[0,1],[1,0],[1,2],[2,0],[2,2],[3,0],[3,2],[4,0],[4,1]],
        'O': [[0,1],[1,0],[1,2],[2,0],[2,2],[3,0],[3,2],[4,1]],
        'T': [[0,0],[0,1],[0,2],[1,1],[2,1],[3,1],[4,1]],
        'L': [[0,0],[1,0],[2,0],[3,0],[4,0],[4,1],[4,2]],
        'I': [[0,0],[0,1],[0,2],[1,1],[2,1],[3,1],[4,0],[4,1],[4,2]],
        'F': [[0,0],[0,1],[0,2],[1,0],[2,0],[2,1],[3,0],[4,0]],
        'E': [[0,0],[0,1],[0,2],[1,0],[2,0],[2,1],[3,0],[4,0],[4,1],[4,2]]
      };

      // Calculate letter positions
      // "DOT" on rows 5-9, "LIFE" on rows 11-15
      // This puts text roughly in middle of 19-row grid (365/19 â‰ˆ 19.2 rows)
      const cols = 19;
      const letterWidth = 3;
      const letterSpacing = 1;

      // DOT starting positions (row 5, centered)
      // DOT takes 3*3 + 2*1 = 11 columns, start at col 4 to center
      const dotStartRow = 5;
      const dotStartCol = 4;

      // LIFE starting positions (row 11, centered)
      // LIFE takes 4*3 + 3*1 = 15 columns, start at col 2 to center
      const lifeStartRow = 11;
      const lifeStartCol = 2;

      const letterPositions = new Set();

      // Add "DOT" letters
      ['D', 'O', 'T'].forEach((letter, letterIndex) => {
        const startCol = dotStartCol + letterIndex * (letterWidth + letterSpacing);
        letterPatterns[letter].forEach(([rowOff, colOff]) => {
          const row = dotStartRow + rowOff;
          const col = startCol + colOff;
          const index = row * cols + col;
          if (index < totalDays) {
            letterPositions.add(index);
          }
        });
      });

      // Add "LIFE" letters
      ['L', 'I', 'F', 'E'].forEach((letter, letterIndex) => {
        const startCol = lifeStartCol + letterIndex * (letterWidth + letterSpacing);
        letterPatterns[letter].forEach(([rowOff, colOff]) => {
          const row = lifeStartRow + rowOff;
          const col = startCol + colOff;
          const index = row * cols + col;
          if (index < totalDays) {
            letterPositions.add(index);
          }
        });
      });

      // Generate dots
      const grid = document.getElementById('dotGrid');

      for (let i = 0; i < totalDays; i++) {
        const dot = document.createElement('span');
        dot.className = 'dot';

        // Add letter class if this dot is part of DOTLIFE text
        if (letterPositions.has(i)) {
          dot.classList.add('letter');
        }

        // Add time-based class
        if (i < dayOfYear - 1) {
          dot.classList.add('past');
        } else if (i === dayOfYear - 1) {
          dot.classList.add('today');
        } else {
          dot.classList.add('future');
        }

        grid.appendChild(dot);
      }
    })();
  </script>
</body>
</html>
