# Detail Flow - Tap Dot Opens Detail
# Tags: visualize, detail

appId: app.antran.dotlife
name: Detail - View and Add Experience

---
- launchApp:
    clearState: true

# Wait for app to load
- extendedWaitUntil:
    visible:
      id: "capture.noteTextField"
    timeout: 10000

# First add a note so we have data
- tapOn:
    id: "capture.noteTextField"
- inputText: "Test experience for detail"
- pressKey: Enter

# Wait for save
- waitForAnimationToEnd

# Verify text field cleared
- extendedWaitUntil:
    visible:
      id: "capture.noteTextField"
    timeout: 5000

# Take screenshot after save
- takeScreenshot: detail_01_after_save

# Navigate to Visualize
- swipe:
    direction: LEFT
    duration: 500

# Wait for animation
- waitForAnimationToEnd

# Ensure Today grid is visible
- extendedWaitUntil:
    visible:
      id: "visualize.today.grid"
    timeout: 5000

# Tap current moment dot to open detail
- tapOn:
    id: "visualize.dot.current"

# Verify detail screen is shown
- extendedWaitUntil:
    visible:
      id: "detail.doneButton"
    timeout: 5000

# Dismiss detail
- tapOn:
    id: "detail.doneButton"

# Verify we stayed on Visualize (not back to Capture)
- extendedWaitUntil:
    visible:
      id: "visualize.today.grid"
    timeout: 5000
- assertNotVisible:
    id: "capture.noteTextField"

# Take screenshot after dismiss
- takeScreenshot: detail_02_after_dismiss
